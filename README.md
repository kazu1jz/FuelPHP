# お問い合わせフォーム

## 開発環境

* FuelPHP: 1.8.2
* PHP: 7.4.25
* HTML
* MariaDB:10.4.18
* xampp
* VScode

## インフラ選定理由
* VMWareやDockerなどの仮想化環境を自身のPC内に構築し、Linuxサーバーを構築することが望ましいです。(推奨)と提示されておりましたが学習コストの面を考えて、ローカルでの開発を選定しました。
* LinuxやDockerの技術はこれからは必須スキルだと考えているので、今後習得するために学びたいと思っています。

## 実装に費やした時間

30時間ほど
* FuelPHPの学習
* システムの開発
お問い合わせシステムを作る上で、不足している知識が多かったため、学習しながら進めました。

Laravelでしか、webアプリを作ったことが無かったので、メインの部分に入る前にFuelPHPの参考書や、ネットの記事で基礎的な知識を取り入れながら開発に着手しました。
システムを作り終える頃には最初に比べて基礎的な使い方を理解することはできました。

## 実装中に問題となったところ・工夫したところ

### 問題となったところ
* マイグレーションが実行できず、テーブルを作成することができなかった。
原因を考えた際に、xamppのphpの拡張機能が足りていない、phpの環境設定が間違っている、PHPと相性が悪いと予想してcomposer再インストールするもマイグレーション実行できず。
マイグレーションファイル自動生成後すぐ実行してもエラーが起きる等様々なことを行いましたが、解決できずにかなりの時間を使ってしまいました。
その後、公式ドキュメントにてFuelPHPはPHPのバージョン7までしか対応していないことを確認。PHPの8.0.2を使っていたため、PHPのバージョンを7.4.25へ変更したところマイグレーションを実行することが出来ました。

PHPのバージョンが違うだけで、様々な問題が生じることを知ることができました。
今後同じようなエラーがあった際は、バージョンの違いについても考えたいきたいと思います。


### 工夫したところ
### ログイン機能の実装
* マイグレーションで作成したファイルを参考にsimpleauthのファイルを作り変えて、customauthを作成

### ビット演算
* 管理者編集画面の権限のON・OFFの処理をビット演算を用いて実装しました。
参考サイト(https://qiita.com/Ingward/items/43acda931c8a62c70d2f)
 
### コードの書き方
* 再利用できそうなコードは、共通部品として切り分けを積極的に行いました。
ただ、まだまだ自信がないところなので今後、保守性が高いコードを積極的に学習していきたいです。

### メールサーバー
* Windows版のPostfixは存在しない、ローカル環境ということから mailtrap というサービスを利用しました。
参考サイト
(https://laraweb.net/tutorial/2680/)

### 管理者アカウント(テストユーザー)
* アカウント名:test
* パスワード:pass

## 改善点

* FuelPHPでの実装が初めてということもあり、CSS、JavaScriptを取り入れることまですることができなかったので最低限のHTMLで実装を行いました。今後もFuelPHPを使用しアプリ開発を行うことでより深い知識を取り入れたいと思っているので、その際にデザインテクニックも使用したいと思っています。また、今回はローカル環境で開発を進めていましたが実務で必要となってくる、LinuxやDockerも学習し今後アプリ開発で取り入れたいと思っています。

* エントリー送信時のメールを送るときにレスポンスタイム0.5秒以上かかってしまった。
改善方法としては、非同期でメールを送信で行うこと。次回開発する際は取り入れてみたいと考えております。
## どのような動作テストを行ったか

### リンク
* 1 記載された通りの先に遷移するか
* 2 どこからもリンクされないページは存在しないか
* 3ログアウトした状態で管理者ページへアクセスした際にログイン画面にリダイレクトされるか

### フォーム
* 1無効な入力を受容しないか
* 2必須項目
* 3入力可能な文字列
* 4テーブルやフォームは全て表示されているか？適切なサイズに広げられて
* 5必要なスクロールバーが表示されているか？

### 数字入力フィールドのチェック
* 1最小値、最大値が正しく取り扱われることを確認する
* 2空白が先頭にある数字フィールドは、エラーとして処理または報告されるか確認する
* 3空白が末尾にある数字フィールドは、エラーとして処理または報告されるか確認する

### 英数字入力フィールドのチェック
* 1空白及び空白ではないデータを試す
* 2最大値、最低値を入れる
* 3無効な文字や記号を入れる

### 接続（表示）速度
* 1サイトは閲覧者のブラウザで8秒以内に表示されるくらい軽くなっているか？

## 参考資料又は参考サイト
学習開始から、システム開発までに学習、参考にした教材をご紹介します。

ただ、教材全てを完璧に行うと時間が足りないため自分に必要な知識を選別しながら学習しました。


### FuelPHPの使い方、全体的な学習
[はじめてのフレームワークとしてのFuelPHP 改訂版](https://www.amazon.co.jp/%E3%81%AF%E3%81%98%E3%82%81%E3%81%A6%E3%81%AE%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%A8%E3%81%97%E3%81%A6%E3%81%AEFuelPHP-%E6%94%B9%E8%A8%82%E7%89%88-%E9%88%B4%E6%9C%A8-%E6%86%B2%E6%B2%BB/dp/4899774222)

[ざっくりFuelPHPの使い方](https://qiita.com/kazukichi/items/2a6e242091c5f485b976)
全体的なFuelPHPの使い方や、機能実装方法について知ることができました。

### db接続
[db接続方法](https://mkimakima.hatenablog.com/entry/20141106/1415271200)
接続で苦戦しながらでしたが、こちらのサイトを参考に進めておりました。

### マイグレーション実行
[マイグレーションを実行方法](https://mintaku-blog.net/fuelphp-migration/)
接続で苦戦しながらでしたが、こちらのサイトを参考に進めておりました。

### 定数の追加
[定数について](https://qiita.com/kotarella1110/items/ba044a412d652d4f384c)
こちらのサイトを参考に進めておりました。

### db接続エラーの際に参考にしたサイト
[ormを有効に](https://nob-log.info/2012/02/05/fuelphp/)
こちらのサイトを参考に進めておりました。

### SessionがFuelPHP1.8.2でSessionが全く動かなかったかないエラーの解決の際に使用したサイト
[FuelPHP1.8.2でSessionが全く動かなかった](https://qiita.com/ookishin2018/items/5d17f75f8fdad4d8fa04)
こちらのサイトを参考に進めておりました。
